@* @model List<MVC.Models.tblemp>

<!DOCTYPE html>
<html>
<head>
    <title>Kendo UI Component Example</title>
    <!-- Kendo UI CSS -->
    <link rel="stylesheet" href="https://kendo.cdn.telerik.com/2022.1.119/styles/kendo.default.min.css">
 <link rel="stylesheet" href="https://kendo.cdn.telerik.com/2022.1.301/styles/kendo.default-v2.min.css" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://kendo.cdn.telerik.com/2022.1.301/js/kendo.all.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            margin: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background-color: #fff;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        th {
            background-color: #007bff;
            color: #fff;
        }

        tbody tr:hover {
            background-color: #f2f2f2;
        }

        .action-buttons button {
            padding: 8px 12px;
            margin-right: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .action-buttons button.updateEmployee {
            background-color: #28a745;
            color: #fff;
        }

        .action-buttons button.deleteEmployee {
            background-color: #dc3545;
            color: #fff;
        }

        .action-buttons button:hover {
            background-color: #555;
        }

        #addEmployee {
            padding: 10px 20px;
            margin-bottom: 20px;
            background-color: #007bff;
            color: #fff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        #addEmployee:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
   @* <a class="btn btn-primary" asp-action="Create">Add New Student</a> *@
   @* <div>
        <button id="btnAddEmployee">Add Employee</button>
        <div id="addEmployeeWindow"></div>
    </div>
    <table>
        <thead>
            <tr>
                <th>Employee ID</th>
                <th>Employee Name</th>
                <th>Gender</th>
                <th>Date of Birth</th>
                <th>Shift</th>
                <th>Department ID</th>
                <th>Employee Image</th>
                <th>Action</th> <!-- New column for action buttons -->
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>@item.c_empid</td>
                    <td>@item.c_empname</td>
                    <td>@item.c_gender</td>
                    <td>@item.c_dob.ToString("MM/dd/yyyy")</td>
                    <td>@item.c_shift</td>
                    <td>@item.c_depid</td>
                    <td><img src="~/images/@item.c_empimage" alt="Item Image" width="100" /></td>
                    <td class="action-buttons">
    <button id="btnUpdate_@item.c_empid" class="updateEmployee k-button k-primary" data-id="@item.c_empid">Update</button>
    <button id="btnDelete_@item.c_empid" class="deleteEmployee k-button k-primary" data-id="@item.c_empid">Delete</button>
</td>

                </tr>
            }
        </tbody>
    </table>

    
    <script>
    $(document).ready(function () {
        $("#btnAddEmployee").click(function () {
            $("#addEmployeeWindow").kendoWindow({
                title: "Add Employee",
                width: "500px",
                modal: true,
                visible: false,
                resizable: true,
                draggable: true
            }).data("kendoWindow").center().open().content(`
                <form id="addEmployeeForm" enctype="multipart/form-data">
                    <div>
                        <label for="c_empname">Employee Name:</label>
                        <input type="text" id="c_empname" name="c_empname" />
                    </div>
                    <div>
                        Gender: <br />
                        <input type="radio" id="male" name="c_gender" value="Male">
                        <label for="male">Male</label>
                        <input type="radio" id="female" name="c_gender" value="Female">
                        <label for="female">Female</label>
                    </div>
                    <div>
                        Shift: <br />
                        <input type="checkbox" id="c_shift" name="c_shift" value="Morning">
                        <label for="morningShift">Morning</label>
                        <input type="checkbox" id="c_shift" name="c_shift" value="Night">
                        <label for="nightShift">Night</label>
                    </div>
                    <div>
                        <label for="c_depid">Department:</label>
                        <select id="c_depid" name="c_depid" ></select>
                    </div>
                    <div>
                        <label for="c_dob">Date of Joining:</label>
                        <input type="date" id="c_dob" name="c_dob">
                    </div>
                    <div>
                        <label for="ImageFile">Employee Image:</label>
                        <input type="file" id="ImageFile" name="file" ><br />
                    </div>
                    <button type="button" id="submitForm">Save</button>
                </form>
            `);

            $("#c_depid").kendoDropDownList({
                optionLabel: "Select Department",
                dataTextField: "c_dename",
                dataValueField: "c_depid",
                dataSource: {
                    transport: {
                        read: {
                            url: "https://localhost:7028/kendoempcomponent/getdeptname",
                            dataType: "json",
                            
                        }
                    }
                }
            });
            $("#ImageFile").kendoUpload({
    async: {
        saveUrl: "https://localhost:7028/kendoempcomponent/uploadimage",
        autoUpload: true
    },
    upload: function (e) {
        // You can add additional logic here if needed
        console.log("Upload initiated...");
    },
    success: function (e) {
        // Handle success response
        console.log("Upload successful...");
        console.log(e.response); // Response from the server, if any
    },
    error: function (e) {
        // Handle error
        console.error("Upload failed...");
        console.log(e);
    }
}); 

$("#c_dob").kendoDatePicker();


            

            // Handle form submission
            $("#submitForm").click(function () {
                
                var formData = new FormData($("#addEmployeeForm")[0]);

                $.ajax({
                    url: "https://localhost:7028/kendoempcomponent/create",
                    type: "POST",
                    data: formData,
                    processData: false,
                    contentType: false,
                    success: function (response) {
                        // Handle success response
                        console.log(response);
                    },
                    error: function (xhr, status, error) {
                        // Handle error
                        console.log(error);
                    }
                });
            });

            $(".updateEmployee").click(function () {
                var employeeId = $(this).data("id");

                $.ajax({
                    url: "https://localhost:7028/kendoempcomponent/GetEmployee/" + employeeId, // Adjust the URL according to your endpoint
                    type: "GET",
                    success: function (employee) {
                        $("#c_empname").val(employee.c_empname);
                        // Set gender based on employee data
                        if (employee.c_gender === "Male") {
                            $("#male").prop("checked", true);
                        } else {
                            $("#female").prop("checked", true);
                        }
                        // Set shift based on employee data
                        // Assuming shift is represented as checkboxes with values "Morning" and "Night"
                        if (employee.c_shift.includes("Morning")) {
                            $("#c_shiftMorning").prop("checked", true);
                        }
                        if (employee.c_shift.includes("Night")) {
                            $("#c_shiftNight").prop("checked", true);
                        }
                        // Set department based on employee data
                        $("#c_depid").data("kendoDropDownList").value(employee.c_depid);
                        // Set date of joining based on employee data
                        $("#c_dob").val(employee.c_dob);

                        // Open the window for updating employee
                        $("#addEmployeeWindow").data("kendoWindow").open();
                    },
                    error: function (xhr, status, error) {
                        // Handle error
                        console.log(error);
                    }
                });
            });

            // Event handler for updating employee data
            $("#submitForm").click(function () {
                var formData = new FormData($("#addEmployeeForm")[0]);

                $.ajax({
                    url: "https://localhost:7028/kendoempcomponent/update/" + employeeId, // Adjust the URL according to your endpoint
                    type: "POST",
                    data: formData,
                    processData: false,
                    contentType: false,
                    success: function (response) {
                        // Handle success response
                        console.log(response);
                        // Optionally, close the window or update the table with the new data
                    },
                    error: function (xhr, status, error) {
                        // Handle error
                        console.log(error);
                    }
                });

        });
    });
</script>

</body>
</html>*@

@model List<MVC.Models.tblemp>

<!DOCTYPE html>
<html>
<head>
    <title>Kendo UI Component Example</title>
    <!-- Kendo UI CSS -->
    <link rel="stylesheet" href="https://kendo.cdn.telerik.com/2022.1.119/styles/kendo.default.min.css">
    <link rel="stylesheet" href="https://kendo.cdn.telerik.com/2022.1.301/styles/kendo.default-v2.min.css" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://kendo.cdn.telerik.com/2022.1.301/js/kendo.all.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            margin: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background-color: #fff;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        th {
            background-color: #007bff;
            color: #fff;
        }

        tbody tr:hover {
            background-color: #f2f2f2;
        }

        .action-buttons button {
            padding: 8px 12px;
            margin-right: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .action-buttons button.updateEmployee,
        .action-buttons button.deleteEmployee {
            background-color: #007bff;
            color: #fff;
        }

        .action-buttons button:hover {
            background-color: #0056b3;
        }

        #addEmployee {
            padding: 10px 20px;
            margin-bottom: 20px;
            background-color: #007bff;
            color: #fff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        #addEmployee:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
    @* <div>
        <h2>Add Employee</h2>
        <button id="btnAddEmployee">Add Employee</button>
        <div id="addEmployeeWindow"></div>
    </div> *@
    <table>
        <thead>
            <tr>
                <th>Employee ID</th>
                <th>Employee Name</th>
                <th>Gender</th>
                <th>Date of Birth</th>
                <th>Shift</th>
                <th>Department ID</th>
                <th>Employee Image</th>
                <th>Action</th> <!-- New column for action buttons -->
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>@item.c_empid</td>
                    <td>@item.c_empname</td>
                    <td>@item.c_gender</td>
                    <td>@item.c_dob.ToString("MM/dd/yyyy")</td>
                    <td>@item.c_shift</td>
                    <td>@item.c_depid</td>
                    <td><img src="~/images/@item.c_empimage" alt="Item Image" width="100" /></td>
                    <td class="action-buttons">
                        
                        <a asp-action="Update" asp-route-id="@item.c_empid" class="btn btn-warning" >Edit</a>
                       <a asp-action="Delete" asp-route-id="@item.c_empid" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this student Record?')">Delete</a>
                    </td>
                </tr>
            }
        </tbody>
    </table>

    

    @* <script>
    $(document).ready(function () {
        $("#btnAddEmployee").click(function () {
            $("#addEmployeeWindow").kendoWindow({
                title: "Add Employee",
                width: "500px",
                modal: true,
                visible: false,
                resizable: true,
                draggable: true
            }).data("kendoWindow").center().open().content(`
                <form id="addEmployeeForm" enctype="multipart/form-data">
                    <div>
                        <label for="c_empname">Employee Name:</label>
                        <input type="text" id="c_empname" name="c_empname" />
                    </div>
                    <div>
                        Gender: <br />
                        <input type="radio" id="male" name="c_gender" value="Male">
                        <label for="male">Male</label>
                        <input type="radio" id="female" name="c_gender" value="Female">
                        <label for="female">Female</label>
                    </div>
                    <div>
                        Shift: <br />
                        <input type="checkbox" id="c_shift" name="c_shift" value="Morning">
                        <label for="morningShift">Morning</label>
                        <input type="checkbox" id="c_shift" name="c_shift" value="Night">
                        <label for="nightShift">Night</label>
                    </div>
                    <div>
                        <label for="c_depid">Department:</label>
                        <select id="c_depid" name="c_depid" ></select>
                    </div>
                    <div>
                        <label for="c_dob">Date of Joining:</label>
                        <input type="date" id="c_dob" name="c_dob">
                    </div>
                    <div>
                        <label for="ImageFile">Employee Image:</label>
                        <input type="file" id="ImageFile" name="file" ><br />
                    </div>
                    <button type="button" id="submitForm">Save</button>
                </form>
            `);

            $("#c_depid").kendoDropDownList({
                optionLabel: "Select Department",
                dataTextField: "c_dename",
                dataValueField: "c_depid",
                dataSource: {
                    transport: {
                        read: {
                            url: "https://localhost:7028/kendoempcomponent/getdeptname",
                            dataType: "json",
                            
                        }
                    }
                }
            });
            $("#ImageFile").kendoUpload({
    async: {
        saveUrl: "https://localhost:7028/kendoempcomponent/uploadimage",
        autoUpload: true
    },
    upload: function (e) {
        // You can add additional logic here if needed
        console.log("Upload initiated...");
    },
    success: function (e) {
        // Handle success response
        console.log("Upload successful...");
        console.log(e.response); // Response from the server, if any
    },
    error: function (e) {
        // Handle error
        console.error("Upload failed...");
        console.log(e);
    }
});      

$(".deleteEmployee").click(function () {
        var id = $(this).attr("asp-route-id");
        $.ajax({
            url: "https://localhost:7028/kendoempcomponent/delete/" + id,
            type: "POST", // Or "DELETE" if your backend supports it
            success: function (response) {
                // Handle success response
                console.log("Employee record deleted successfully.");
                // Optionally, you can reload the page or update the UI as needed
            },
            error: function (xhr, status, error) {
                // Handle error
                console.log("Error deleting employee record:", error);
            }
        });
    });
            

            // Handle form submission
            $("#submitForm").click(function () {
                
                var formData = new FormData($("#addEmployeeForm")[0]);

                $.ajax({
                    url: "https://localhost:7028/kendoempcomponent/create",
                    type: "POST",
                    data: formData,
                    processData: false,
                    contentType: false,
                    success: function (response) {
                        // Handle success response
                        console.log(response);
                    },
                    error: function (xhr, status, error) {
                        // Handle error
                        console.log(error);
                    }
                });



            });
        });
    });
</script> *@

</body>
</html>

